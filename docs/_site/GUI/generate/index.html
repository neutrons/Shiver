<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Spectroscopy HIstogram Visualizer for Event Reduction | a data visualization tool for single crystal neutron spectroscopy.</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Spectroscopy HIstogram Visualizer for Event Reduction" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="a data visualization tool for single crystal neutron spectroscopy." />
<meta property="og:description" content="a data visualization tool for single crystal neutron spectroscopy." />
<link rel="canonical" href="http://localhost:4000/Shiver/GUI/generate/" />
<meta property="og:url" content="http://localhost:4000/Shiver/GUI/generate/" />
<meta property="og:site_name" content="Spectroscopy HIstogram Visualizer for Event Reduction" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spectroscopy HIstogram Visualizer for Event Reduction" />
<script type="application/ld+json">
{"url":"http://localhost:4000/Shiver/GUI/generate/","headline":"Spectroscopy HIstogram Visualizer for Event Reduction","@type":"WebPage","description":"a data visualization tool for single crystal neutron spectroscopy.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/Shiver/assets/css/style.css?v=">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/Shiver/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">SHIVER - <u>S</u>pectroscopy <u>HI</u>stogram <u>V</u>isualizer for <u>E</u>vent <u>R</u>eduction</h1>
      
      
      
    </header>
    
    <main id="content" class="main-content" role="main">
    <a href=/Shiver/>Home</a>
      <ul id="markdown-toc">
  <li><a href="#generate-tab" id="markdown-toc-generate-tab">Generate tab</a>    <ul>
      <li><a href="#raw-data-files" id="markdown-toc-raw-data-files">Raw data files</a></li>
      <li><a href="#data-type-and-location" id="markdown-toc-data-type-and-location">Data type and location</a></li>
      <li><a href="#reduction-parameters" id="markdown-toc-reduction-parameters">Reduction parameters</a></li>
    </ul>
  </li>
</ul>

<h1 id="generate-tab">Generate tab</h1>

<p>Shiver uses multi-dimensional event workspaces as an intermediate data storage. These are
neutron events labeled by the reciprocal space coordinates. Once all the parameters are set and
valid, one can click on the <code class="language-python highlighter-rouge"><span class="n">Generate</span></code> button, to create and save an MD event workspace. Once
the process is done, the workspace will appear in the list in the Main window. One can
also <code class="language-python highlighter-rouge"><span class="n">Save</span> <span class="n">configuration</span></code> as a python file.</p>

<p><img src="/Shiver//images/Shiver-generate.png" alt="Generate tab" /></p>

<h2 id="raw-data-files">Raw data files</h2>

<p>There are two ways to choose the raw data files. The standard way is to navigate to the folder, then
click (or shift+click, or ctrl+click, as appropriate) to select. The second option, if the appropriate
metadata was included during acquisition, is to use the <code class="language-python highlighter-rouge"><span class="n">ONCat</span></code> database.</p>

<ul>
  <li>Make sure you are connected to the database. Use UCAMS/XCAMS and password</li>
  <li>Select instrument</li>
  <li>The available experiment (IPTS) numbers is repopulated. Select one</li>
  <li>The name of available datasets is prepopulated. 
 This is written as sequence name in the raw file. For some instruments
 datasets are labeled by the comments instead. If that is the case, one needs to modify
 the <code class="language-python highlighter-rouge"><span class="o">~/</span><span class="p">.</span><span class="n">shiver</span><span class="o">/</span><span class="n">configuration</span><span class="p">.</span><span class="n">ini</span></code> file, and set <code class="language-python highlighter-rouge"><span class="n">use_notes</span></code> to <code class="language-python highlighter-rouge"><span class="bp">True</span></code>. If dataset names
 are not available, or one changes manually the selection, the <code class="language-python highlighter-rouge"><span class="n">Select</span> <span class="n">dataset</span></code> field will change
 to <code class="language-python highlighter-rouge"><span class="n">custom</span></code></li>
  <li>Select an angle integration step. Runs within the same step will be grouped together.
 This can reduce memory size, if several measurements were done at the same angle.</li>
</ul>

<h2 id="data-type-and-location">Data type and location</h2>

<p>The user must enter a name for the workspace to be created, and a location to save the file. The file
name will be the same as the workspace name, plus the <code class="language-python highlighter-rouge"><span class="p">.</span><span class="n">nxs</span></code> extension.</p>

<p>There are three types of processing:</p>

<ul>
  <li><code class="language-python highlighter-rouge"><span class="n">data</span></code> is the standard way, when each event is labeled by the momentum transfer in the
 goniometer frame. Workspaces of this type will show up in the
 <a href="/Shiver//GUI/main_window">main window</a> with label <code class="language-python highlighter-rouge"><span class="n">QS</span></code>, and can be selected as data or
 background. An example of using this angle dependent background can be the case when one
 wants to subtract two different temperatures, measured at the same angles.</li>
  <li><code class="language-python highlighter-rouge"><span class="n">Background</span> <span class="p">(</span><span class="n">angle</span> <span class="n">integrated</span><span class="p">)</span></code> adds together all the selected runs and ignores the goniometer
 value. This process can be used if one measures an empty can type of background. The output
 workspace will show up in the  <a href="/Shiver//GUI/main_window">main window</a> with label <code class="language-python highlighter-rouge"><span class="n">QL</span></code>,
 and can only be used as a background</li>
  <li><code class="language-python highlighter-rouge"><span class="n">Background</span> <span class="p">(</span><span class="n">minimized</span> <span class="n">by</span> <span class="n">angle</span> <span class="ow">and</span> <span class="n">energy</span><span class="p">)</span></code> is a new way of calculating a powder-like
 background directly from the data. Nearby detectors are grouped together, and events are then binned
 in energy transfer. For each detector group and energy bin, one calculates then sorts the
 intensity for each sample rotation. The user then selects runs with the intensities in a desired
 percentage range. The parameters for this option, <code class="language-python highlighter-rouge"><span class="n">Grouping</span> <span class="nb">file</span></code>, <code class="language-python highlighter-rouge"><span class="n">Percent</span> <span class="n">Min</span></code>, and <code class="language-python highlighter-rouge"><span class="n">Percent</span> <span class="n">Max</span></code>,
 can be found in the <code class="language-python highlighter-rouge"><span class="n">Background</span> <span class="n">minimization</span> <span class="n">options</span></code> area. Ask the local contact for a good grouping
 file.</li>
</ul>

<h2 id="reduction-parameters">Reduction parameters</h2>

<p>Users can specify additional reduction parameters. A <code class="language-python highlighter-rouge"><span class="n">Mask</span></code> file is a processed Mantid NeXus file.
The <code class="language-python highlighter-rouge"><span class="n">Normalization</span></code> file can also contain a mask, but it also contains the efficiency of the
detectors, measured using some incoherent scatterer (usually Vanadium or TiZr).</p>

<p>The incident energy <code class="language-python highlighter-rouge"><span class="n">Ei</span></code> and the time offset at the moderator <code class="language-python highlighter-rouge"><span class="n">T0</span></code> are automatically calculated
from the monitors or from metadata in the file. However, if these are incorrect, one can
just override them.</p>

<p>The <a href="/Shiver//GUI/additional_ui/#sample-parameters">Sample options</a> is required to set up
lattice parameters and orientation.</p>

<p>The <a href="/Shiver//GUI/additional_ui/#polarization-options">Polarization Options</a> is used for HYSPEC
measurements to set polarization state, flipping ratio, and, optionally, to overide the status of
the supermirror analyzer.</p>



      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
